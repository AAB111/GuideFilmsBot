from unittest import mock
from unittest.mock import AsyncMock
import pytest

from handlers.content import start_content
from handlers.functions_common import show_group_movies, show_text_movies


@pytest.mark.asyncio
async def test_content_movies_is_none():
    with mock.patch('handlers.content.get_content_based',
                    return_value=None) as mock_get_content_based:
        message = AsyncMock()
        message.from_user.id = 2
        await start_content(message)
        assert mock_get_content_based.call_count == 1
        assert mock_get_content_based.call_args == mock.call(message.from_user.id, {"page": 1, "n": 100})
        message.reply.assert_awaited_with("–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞. –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º.")


@pytest.mark.asyncio
async def test_content_movies_is_len_0():
    with mock.patch('handlers.content.get_content_based', return_value=[]) as mock_get_content_based:
        message = AsyncMock()
        message.from_user.id = 2
        await start_content(message)
        assert mock_get_content_based.call_count == 1
        assert mock_get_content_based.call_args == mock.call(message.from_user.id, {"page": 1, "n": 100})
        message.reply.assert_awaited_with('–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.')


@pytest.mark.asyncio
async def test_content_movies_poster_path_none():
    movies = [{
        "id": 447365,
        "title": "–°—Ç—Ä–∞–∂–∏ –ì–∞–ª–∞–∫—Ç–∏–∫–∏ –¢–æ–º. 3",
        "tagline": "–ï—â–µ —Ä–∞–∑ —Å —á—É–≤—Å—Ç–≤–æ–º.",
        "overview": "–ü–∏—Ç–µ—Ä –ö–≤–∏–ª–ª, –≤—Å–µ –µ—â–µ –Ω–µ –æ–ø—Ä–∞–≤–∏–≤—à–∏–π—Å—è –æ—Ç –ø–æ—Ç–µ—Ä–∏ –ì–∞–º–æ—Ä—ã, –¥–æ–ª–∂–µ–Ω —Å–ø–ª–æ—Ç–∏—Ç—å –≤–æ–∫—Ä—É–≥ —Å–µ–±—è —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É, "
                    "—á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –≤—Å–µ–ª–µ–Ω–Ω—É—é, –∞ —Ç–∞–∫–∂–µ –∑–∞—â–∏—Ç–∏—Ç—å –æ–¥–Ω–æ–≥–æ –∏–∑ —Å–≤–æ–∏—Ö. –ú–∏—Å—Å–∏—è, –∫–æ—Ç–æ—Ä–∞—è, –µ—Å–ª–∏ –µ–µ –Ω–µ "
                    "–∑–∞–≤–µ—Ä—à–∏—Ç—å —É—Å–ø–µ—à–Ω–æ, –≤–ø–æ–ª–Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–Ω—Ü—É –°—Ç—Ä–∞–∂–µ–π, –∫–∞–∫–∏–º–∏ –º—ã –∏—Ö –∑–Ω–∞–µ–º.",
        "vote_average": 7.974999904632568,
        "release_date": "2023-05-03",
        "poster_path": None,
        "genres": [
            {
                "genre": {
                    "id": 878,
                    "name": " –ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"
                }
            },
            {
                "genre": {
                    "id": 12,
                    "name": " –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ"
                }
            },
            {
                "genre": {
                    "id": 28,
                    "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                }
            }
        ],
        "companies": [
            {
                "company": {
                    "id": 420,
                    "name": "Marvel Studios"
                }
            },
            {
                "company": {
                    "id": 176762,
                    "name": "Kevin Feige Productions"
                }
            }
        ]
    }]

    with mock.patch('handlers.content.get_content_based', return_value=movies) as mock_get_content_based:
        message = AsyncMock()
        message.from_user.id = 1080557340
        await start_content(message)

        assert mock_get_content_based.call_count == 1
        assert mock_get_content_based.call_args == mock.call(message.from_user.id, {"page": 1, "n": 100})
        text_reply = await show_text_movies(movies)
        message.reply.assert_awaited_with(text_reply,
                                          parse_mode='HTML')


@pytest.mark.asyncio
async def test_content_text():
    movies = [{
        "id": 447365,
        "title": "–°—Ç—Ä–∞–∂–∏ –ì–∞–ª–∞–∫—Ç–∏–∫–∏ –¢–æ–º. 3",
        "tagline": "–ï—â–µ —Ä–∞–∑ —Å —á—É–≤—Å—Ç–≤–æ–º.",
        "overview": "–ü–∏—Ç–µ—Ä –ö–≤–∏–ª–ª, –≤—Å–µ –µ—â–µ –Ω–µ –æ–ø—Ä–∞–≤–∏–≤—à–∏–π—Å—è –æ—Ç –ø–æ—Ç–µ—Ä–∏ –ì–∞–º–æ—Ä—ã, –¥–æ–ª–∂–µ–Ω —Å–ø–ª–æ—Ç–∏—Ç—å –≤–æ–∫—Ä—É–≥ —Å–µ–±—è —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É, "
                    "—á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –≤—Å–µ–ª–µ–Ω–Ω—É—é, –∞ —Ç–∞–∫–∂–µ –∑–∞—â–∏—Ç–∏—Ç—å –æ–¥–Ω–æ–≥–æ –∏–∑ —Å–≤–æ–∏—Ö. –ú–∏—Å—Å–∏—è, –∫–æ—Ç–æ—Ä–∞—è, –µ—Å–ª–∏ –µ–µ –Ω–µ "
                    "–∑–∞–≤–µ—Ä—à–∏—Ç—å —É—Å–ø–µ—à–Ω–æ, –≤–ø–æ–ª–Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–Ω—Ü—É –°—Ç—Ä–∞–∂–µ–π, –∫–∞–∫–∏–º–∏ –º—ã –∏—Ö –∑–Ω–∞–µ–º.",
        "vote_average": 7.974999904632568,
        "release_date": "2023-05-03",
        "poster_path": None,
        "genres": [
            {
                "genre": {
                    "id": 878,
                    "name": " –ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"
                }
            },
            {
                "genre": {
                    "id": 12,
                    "name": " –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ"
                }
            },
            {
                "genre": {
                    "id": 28,
                    "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                }
            }
        ],
        "companies": [
            {
                "company": {
                    "id": 420,
                    "name": "Marvel Studios"
                }
            },
            {
                "company": {
                    "id": 176762,
                    "name": "Kevin Feige Productions"
                }
            }
        ]
    }]
    with mock.patch('handlers.content.get_content_based', return_value=movies) as mock_get_content_based:
        message = AsyncMock()
        message.from_user.id = 1080557340
        await start_content(message)

        assert mock_get_content_based.call_count == 1
        assert mock_get_content_based.call_args == mock.call(message.from_user.id, {"page": 1, "n": 100})

        text_reply = await show_text_movies(movies)

        message.reply.assert_awaited_with(text_reply,
                                          parse_mode='HTML')


@pytest.mark.asyncio
async def test_content_media_all():
    movies = [
        {
            "id": 447365,
            "title": "–°—Ç—Ä–∞–∂–∏ –ì–∞–ª–∞–∫—Ç–∏–∫–∏ –¢–æ–º. 3",
            "tagline": "–ï—â–µ —Ä–∞–∑ —Å —á—É–≤—Å—Ç–≤–æ–º.",
            "overview": "–ü–∏—Ç–µ—Ä –ö–≤–∏–ª–ª, –≤—Å–µ –µ—â–µ –Ω–µ –æ–ø—Ä–∞–≤–∏–≤—à–∏–π—Å—è –æ—Ç –ø–æ—Ç–µ—Ä–∏ –ì–∞–º–æ—Ä—ã, –¥–æ–ª–∂–µ–Ω —Å–ø–ª–æ—Ç–∏—Ç—å –≤–æ–∫—Ä—É–≥ —Å–µ–±—è —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É, —á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –≤—Å–µ–ª–µ–Ω–Ω—É—é, –∞ —Ç–∞–∫–∂–µ –∑–∞—â–∏—Ç–∏—Ç—å –æ–¥–Ω–æ–≥–æ –∏–∑ —Å–≤–æ–∏—Ö. –ú–∏—Å—Å–∏—è, –∫–æ—Ç–æ—Ä–∞—è, –µ—Å–ª–∏ –µ–µ –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å —É—Å–ø–µ—à–Ω–æ, –≤–ø–æ–ª–Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–Ω—Ü—É –°—Ç—Ä–∞–∂–µ–π, –∫–∞–∫–∏–º–∏ –º—ã –∏—Ö –∑–Ω–∞–µ–º.",
            "vote_average": 7.974999904632568,
            "release_date": "2023-05-03",
            "poster_path": "/r2J02Z2OpNTctfOSN1Ydgii51I3.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 878,
                        "name": " –ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"
                    }
                },
                {
                    "genre": {
                        "id": 12,
                        "name": " –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 28,
                        "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 420,
                        "name": "Marvel Studios"
                    }
                },
                {
                    "company": {
                        "id": 176762,
                        "name": "Kevin Feige Productions"
                    }
                }
            ]
        },
        {
            "id": 496450,
            "title": "–ß—É–¥–µ—Å–∞: –õ–µ–¥–∏–±–∞–≥ –∏ –ö–æ—Ç –ù—É–∞—Ä, —Ñ–∏–ª—å–º",
            "tagline": "–°—É–¥—å–±–∞ –º–∏—Ä–∞ –≤ –∏—Ö —Ä—É–∫–∞—Ö.",
            "overview": "–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –≤–æ–ª—à–µ–±–Ω—ã—Ö –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç–µ–π –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª –Ω–µ—É–∫–ª—é–∂—É—é –¥–µ–≤–æ—á–∫—É –∏ –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ –º–∞–ª—å—á–∏–∫–∞ –≤ —Å—É–ø–µ—Ä–≥–µ—Ä–æ–µ–≤, –æ–Ω–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–º–æ–≥—É—Ç —Ä–∞—Å–∫—Ä—ã—Ç—å —Å–≤–æ–∏ –ª–∏—á–Ω–æ—Å—Ç–∏ ‚Äî –¥–∞–∂–µ –¥—Ä—É–≥ –¥—Ä—É–≥—É.",
            "vote_average": 7.738999843597412,
            "release_date": "2023-07-05",
            "poster_path": "/dQNJ8SdCMn3zWwHzzQD2xrphR1X.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 16,
                        "name": " –ê–Ω–∏–º–∞—Ü–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 14,
                        "name": " –§–∞–Ω—Ç–∞–∑–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 28,
                        "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 10749,
                        "name": " –†–æ–º–∞–Ω—Ç–∏–∫–∞"
                    }
                },
                {
                    "genre": {
                        "id": 10751,
                        "name": " –°–µ–º—å—è"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 140008,
                        "name": "The Awakening Production"
                    }
                },
                {
                    "company": {
                        "id": 2902,
                        "name": "SND"
                    }
                },
                {
                    "company": {
                        "id": 200503,
                        "name": "Fantawild"
                    }
                },
                {
                    "company": {
                        "id": 82973,
                        "name": "Zag Animation Studios"
                    }
                },
                {
                    "company": {
                        "id": 220039,
                        "name": "ON Animation Studios"
                    }
                }
            ]
        },
        {
            "id": 507089,
            "title": "–ü—è—Ç—å –ù–æ—á–µ–π –° –§—Ä–µ–¥–¥–∏",
            "tagline": "–°–º–æ–∂–µ—Ç–µ –ª–∏ –≤—ã –ø–µ—Ä–µ–∂–∏—Ç—å –ø—è—Ç—å –Ω–æ—á–µ–π?",
            "overview": "–ù–µ–¥–∞–≤–Ω–æ —É–≤–æ–ª–µ–Ω–Ω—ã–π –∏ –æ—Ç—á–∞—è–Ω–Ω–æ –Ω—É–∂–¥–∞—é—â–∏–π—Å—è –≤ —Ä–∞–±–æ—Ç–µ, –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –º–æ–ª–æ–¥–æ–π —á–µ–ª–æ–≤–µ–∫ –ø–æ –∏–º–µ–Ω–∏ –ú–∞–π–∫ —Å–æ–≥–ª–∞—à–∞–µ—Ç—Å—è —É—Å—Ç—Ä–æ–∏—Ç—å—Å—è –Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç—å –Ω–æ—á–Ω–æ–≥–æ –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∞ –≤ –∑–∞–±—Ä–æ—à–µ–Ω–Ω–æ–º —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ: –ø–∏—Ü—Ü–µ—Ä–∏—è –§—Ä–µ–¥–¥–∏ –§–∞–∑–±–∏—Ä–∞. –ù–æ –≤—Å–∫–æ—Ä–µ –æ–Ω –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç, —á—Ç–æ –≤–æ –§—Ä–µ–¥–¥–∏ –≤—Å–µ –Ω–µ —Ç–æ, —á–µ–º –∫–∞–∂–µ—Ç—Å—è.",
            "vote_average": 7.6570000648498535,
            "release_date": "2023-10-25",
            "poster_path": "/A4j8S6moJS2zNtRR8oWF08gRnL5.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 27,
                        "name": " –£–∂–∞—Å—Ç–∏–∫"
                    }
                },
                {
                    "genre": {
                        "id": 9648,
                        "name": " –¢–∞–π–Ω–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 3172,
                        "name": "Blumhouse Productions"
                    }
                },
                {
                    "company": {
                        "id": 211144,
                        "name": "Scott Cawthon Productions"
                    }
                }
            ]
        },
        {
            "id": 569094,
            "title": "–ß–µ–ª–æ–≤–µ–∫-–ø–∞—É–∫: –ß–µ—Ä–µ–∑ –≤—Å–µ–ª–µ–Ω–Ω—ã–µ",
            "tagline": "–í–∞–∂–Ω–æ —Ç–æ, –∫–∞–∫ –≤—ã –Ω–æ—Å–∏—Ç–µ –º–∞—Å–∫—É.",
            "overview": "–ü–æ—Å–ª–µ –≤–æ—Å—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ì–≤–µ–Ω –°—Ç–µ–π—Å–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π, –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –ß–µ–ª–æ–≤–µ–∫-–ü–∞—É–∫ –∏–∑ –ë—Ä—É–∫–ª–∏–Ω–∞ –∫–∞—Ç–∞–ø—É–ª—å—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ú—É–ª—å—Ç–∏–≤—Å–µ–ª–µ–Ω–Ω—É—é, –≥–¥–µ –æ–Ω –≤—Å—Ç—Ä–µ—á–∞–µ—Ç –û–±—â–µ—Å—Ç–≤–æ –ü–∞—É–∫–æ–≤, –∫–æ–º–∞–Ω–¥—É –õ—é–¥–µ–π-–ü–∞—É–∫–æ–≤, –∫–æ—Ç–æ—Ä–æ–π –ø–æ—Ä—É—á–µ–Ω–æ –∑–∞—â–∏—â–∞—Ç—å —Å–∞–º–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ú—É–ª—å—Ç–∏–≤—Å–µ–ª–µ–Ω–Ω–æ–π. –ù–æ –∫–æ–≥–¥–∞ –≥–µ—Ä–æ–∏ —Å–ø–æ—Ä—è—Ç –æ —Ç–æ–º, –∫–∞–∫ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –Ω–æ–≤–æ–π —É–≥—Ä–æ–∑–æ–π, –ú–∞–π–ª–∑ —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø–∞—É–∫–∞–º–∏ –∏ –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –≤ –æ–¥–∏–Ω–æ—á–∫—É, —á—Ç–æ–±—ã —Å–ø–∞—Å—Ç–∏ —Ç–µ—Ö, –∫–æ–≥–æ –æ–Ω –ª—é–±–∏—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ.",
            "vote_average": 8.399999618530273,
            "release_date": "2023-05-31",
            "poster_path": "/8Vt6mWEReuy4Of61Lnj5Xj704m8.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 16,
                        "name": " –ê–Ω–∏–º–∞—Ü–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 28,
                        "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 12,
                        "name": " –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 878,
                        "name": " –ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 5,
                        "name": "Columbia Pictures"
                    }
                },
                {
                    "company": {
                        "id": 2251,
                        "name": "Sony Pictures Animation"
                    }
                },
                {
                    "company": {
                        "id": 77973,
                        "name": "Lord Miller"
                    }
                },
                {
                    "company": {
                        "id": 84041,
                        "name": "Pascal Pictures"
                    }
                },
                {
                    "company": {
                        "id": 14439,
                        "name": "Arad Productions"
                    }
                },
                {
                    "company": {
                        "id": 7505,
                        "name": "Marvel Entertainment"
                    }
                }
            ]
        },
        {
            "id": 575264,
            "title": "–ú–∏—Å—Å–∏—è –Ω–µ–≤—ã–ø–æ–ª–Ω–∏–º–∞: –ú–µ—Ä—Ç–≤–∞—è —Ä–∞—Å–ø–ª–∞—Ç–∞, —á–∞—Å—Ç—å –ø–µ—Ä–≤–∞—è",
            "tagline": "–ú—ã –≤—Å–µ —Ä–∞–∑–¥–µ–ª—è–µ–º –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Å—É–¥—å–±—É.",
            "overview": "–ò—Ç–∞–Ω –•–∞–Ω—Ç –∏ –µ–≥–æ –∫–æ–º–∞–Ω–¥–∞ –∏–∑ –ú–í–§ –ø—Ä–∏—Å—Ç—É–ø–∞—é—Ç –∫ —Å–≤–æ–µ–π —Å–∞–º–æ–π –æ–ø–∞—Å–Ω–æ–π –º–∏—Å—Å–∏–∏: –≤—ã—Å–ª–µ–¥–∏—Ç—å –Ω–æ–≤–æ–µ —É–∂–∞—Å–∞—é—â–µ–µ –æ—Ä—É–∂–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–≥—Ä–æ–∂–∞–µ—Ç –≤—Å–µ–º—É —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤—É, –ø—Ä–µ–∂–¥–µ —á–µ–º –æ–Ω–æ –ø–æ–ø–∞–¥–µ—Ç –≤ —á—É–∂–∏–µ —Ä—É–∫–∏. –ö–æ–≥–¥–∞ –Ω–∞ –∫–æ–Ω—É —Å—Ç–æ–∏—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –±—É–¥—É—â–∏–º –∏ —Å—É–¥—å–±–æ–π –º–∏—Ä–∞, –∞ —Ç–µ–º–Ω—ã–µ —Å–∏–ª—ã –∏–∑ –ø—Ä–æ—à–ª–æ–≥–æ –ò—Ç–∞–Ω–∞ –ø—Ä–∏–±–ª–∏–∂–∞—é—Ç—Å—è, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å–º–µ—Ä—Ç–µ–ª—å–Ω–∞—è –≥–æ–Ω–∫–∞ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É. –°—Ç–æ–ª–∫–Ω—É–≤—à–∏—Å—å —Å –∑–∞–≥–∞–¥–æ—á–Ω—ã–º –∏ –≤—Å–µ–º–æ–≥—É—â–∏–º –≤—Ä–∞–≥–æ–º, –ò—Ç–∞–Ω –¥–æ–ª–∂–µ–Ω –æ—Å–æ–∑–Ω–∞—Ç—å, —á—Ç–æ –Ω–∏—á—Ç–æ –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –±–æ–ª—å—à–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, —á–µ–º –µ–≥–æ –º–∏—Å—Å–∏—è, –¥–∞–∂–µ –∂–∏–∑–Ω–∏ —Ç–µ—Ö, –æ –∫–æ–º –æ–Ω –∑–∞–±–æ—Ç–∏—Ç—Å—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ.",
            "vote_average": 7.554999828338623,
            "release_date": "2023-07-08",
            "poster_path": "/NNxYkU70HPurnNCSiCjYAmacwm.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 28,
                        "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 53,
                        "name": " –¢—Ä–∏–ª–ª–µ—Ä"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 4,
                        "name": "Paramount"
                    }
                },
                {
                    "company": {
                        "id": 82819,
                        "name": "Skydance Media"
                    }
                },
                {
                    "company": {
                        "id": 21777,
                        "name": "TC Productions"
                    }
                }
            ]
        },
        {
            "id": 666277,
            "title": "–ü—Ä–æ—à–ª—ã–µ –∂–∏–∑–Ω–∏",
            "tagline": None,
            "overview": "–ù–æ—Ä–∞ –∏ –•—ç –°–æ–Ω, –¥–≤–æ–µ –¥—Ä—É–∑–µ–π –¥–µ—Ç—Å—Ç–≤–∞, –≤–æ—Å—Å–æ–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –ù—å—é-–ô–æ—Ä–∫–µ –Ω–∞ –æ–¥–Ω—É —Å—É–¥—å–±–æ–Ω–æ—Å–Ω—É—é –Ω–µ–¥–µ–ª—é, –∫–æ–≥–¥–∞ –æ–Ω–∏ —Å—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è —Å –ø–æ–Ω—è—Ç–∏—è–º–∏ —Å—É–¥—å–±—ã, –ª—é–±–≤–∏ –∏ –≤—ã–±–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω—å.",
            "vote_average": 7.793000221252441,
            "release_date": "2023-06-02",
            "poster_path": "/k3waqVXSnvCZWfJYNtdamTgTtTA.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 18,
                        "name": " –î—Ä–∞–º–∞"
                    }
                },
                {
                    "genre": {
                        "id": 10749,
                        "name": " –†–æ–º–∞–Ω—Ç–∏–∫–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 41077,
                        "name": "A24"
                    }
                },
                {
                    "company": {
                        "id": 1422,
                        "name": "Killer Films"
                    }
                },
                {
                    "company": {
                        "id": 158407,
                        "name": "2AM"
                    }
                },
                {
                    "company": {
                        "id": 128404,
                        "name": "CJ ENM"
                    }
                }
            ]
        },
        {
            "id": 667538,
            "title": "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä—ã: –í–æ—Å—Å—Ç–∞–Ω–∏–µ –∑–≤–µ—Ä–µ–π",
            "tagline": "–û–±—ä–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∏–ª–∏ –ø–∞–¥–∏—Ç–µ.",
            "overview": "–ö–æ–≥–¥–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è —É–≥—Ä–æ–∑–∞, —Å–ø–æ—Å–æ–±–Ω–∞—è —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –≤—Å—é –ø–ª–∞–Ω–µ—Ç—É, –û–ø—Ç–∏–º—É—Å –ü—Ä–∞–π–º –∏ –∞–≤—Ç–æ–±–æ—Ç—ã –¥–æ–ª–∂–Ω—ã –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å—Å—è —Å –º–æ–≥—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ñ—Ä–∞–∫—Ü–∏–µ–π, –∏–∑–≤–µ—Å—Ç–Ω–æ–π –∫–∞–∫ –ú–∞–∫—Å–∏–º–∞–ª—ã. –ü–æ—Å–∫–æ–ª—å–∫—É —Å—É–¥—å–±–∞ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞ –≤–∏—Å–∏—Ç –Ω–∞ –≤–æ–ª–æ—Å–∫–µ, –ª—é–¥–∏ –ù–æ–π –∏ –ï–ª–µ–Ω–∞ —Å–¥–µ–ª–∞—é—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ–µ, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞–º –≤ —Ä–µ—à–∞—é—â–µ–π –±–∏—Ç–≤–µ –∑–∞ —Å–ø–∞—Å–µ–Ω–∏–µ –ó–µ–º–ª–∏.",
            "vote_average": 7.34499979019165,
            "release_date": "2023-06-06",
            "poster_path": "/gPbM0MK8CP8A174rmUwGsADNYKD.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 28,
                        "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 12,
                        "name": " –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 878,
                        "name": " –ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 82819,
                        "name": "Skydance Media"
                    }
                },
                {
                    "company": {
                        "id": 4,
                        "name": "Paramount"
                    }
                },
                {
                    "company": {
                        "id": 435,
                        "name": "di Bonaventura Pictures"
                    }
                },
                {
                    "company": {
                        "id": 6734,
                        "name": "Bay Films"
                    }
                },
                {
                    "company": {
                        "id": 114732,
                        "name": "New Republic Pictures"
                    }
                },
                {
                    "company": {
                        "id": 38831,
                        "name": "DeSanto/Murphy Productions"
                    }
                },
                {
                    "company": {
                        "id": 2598,
                        "name": "Hasbro"
                    }
                }
            ]
        },
        {
            "id": 678512,
            "title": "–ó–≤—É–∫ —Å–≤–æ–±–æ–¥—ã",
            "tagline": "–ë–æ—Ä—å–±–∞ –∑–∞ —Å–≤–µ—Ç. –ó–∞—Å—Ç–∞–≤—å—Ç–µ —Ç—å–º—É –∑–∞–º–æ–ª—á–∞—Ç—å.",
            "overview": "–ò—Å—Ç–æ—Ä–∏—è –¢–∏–º–∞ –ë–∞–ª–ª–∞—Ä–¥–∞, –±—ã–≤—à–µ–≥–æ –ø—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –°–®–ê, –∫–æ—Ç–æ—Ä—ã–π –±—Ä–æ—Å–∞–µ—Ç —Ä–∞–±–æ—Ç—É, —á—Ç–æ–±—ã –ø–æ—Å–≤—è—Ç–∏—Ç—å —Å–≤–æ—é –∂–∏–∑–Ω—å —Å–ø–∞—Å–µ–Ω–∏—é –¥–µ—Ç–µ–π –æ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å–µ–∫—Å-—Ç–æ—Ä–≥–æ–≤—Ü–µ–≤.",
            "vote_average": 8.038999557495117,
            "release_date": "2023-07-03",
            "poster_path": "/qA5kPYZA7FkVvqcEfJRoOy4kpHg.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 28,
                        "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 18,
                        "name": " –î—Ä–∞–º–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 90508,
                        "name": "Santa Fe Films"
                    }
                }
            ]
        },
        {
            "id": 697843,
            "title": "–≠–∫—Å—Ç—Ä–∞–∫—Ü–∏—è 2",
            "tagline": "–ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –ø–æ–µ–∑–¥–∫–µ –≤—Å–µ–π –≤–∞—à–µ–π –∂–∏–∑–Ω–∏.",
            "overview": "–ü–æ–ª—É—á–∏–≤ –∑–∞–¥–∞–Ω–∏–µ —Å–ø–∞—Å—Ç–∏ —Å–µ–º—å—é, –æ–∫–∞–∑–∞–≤—à—É—é—Å—è –≤–æ –≤–ª–∞—Å—Ç–∏ –≥—Ä—É–∑–∏–Ω—Å–∫–æ–≥–æ –≥–∞–Ω–≥—Å—Ç–µ—Ä–∞, –¢–∞–π–ª–µ—Ä –†—ç–π–∫ –ø—Ä–æ–Ω–∏–∫–∞–µ—Ç –≤ –æ–¥–Ω—É –∏–∑ —Å–∞–º—ã—Ö —Å–º–µ—Ä—Ç–æ–Ω–æ—Å–Ω—ã—Ö —Ç—é—Ä–µ–º –º–∏—Ä–∞, —á—Ç–æ–±—ã —Å–ø–∞—Å—Ç–∏ –∏—Ö. –ù–æ –∫–æ–≥–¥–∞ –¥–æ–±—ã—á–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∂–∞—Ä–∫–æ–π, –∏ –≥–∞–Ω–≥—Å—Ç–µ—Ä –ø–æ–≥–∏–±–∞–µ—Ç –≤ –ø—ã–ª—É –±–æ—è, –µ–≥–æ —Å—Ç–æ–ª—å –∂–µ –±–µ–∑–∂–∞–ª–æ—Å—Ç–Ω—ã–π –±—Ä–∞—Ç –≤—ã—Å–ª–µ–∂–∏–≤–∞–µ—Ç –†–µ–π–∫–∞ –∏ –µ–≥–æ –∫–æ–º–∞–Ω–¥—É –≤ –í–µ–Ω—É, —á—Ç–æ–±—ã –æ—Ç–æ–º—Å—Ç–∏—Ç—å.",
            "vote_average": 7.46999979019165,
            "release_date": "2023-06-09",
            "poster_path": "/7gKI9hpEMcZUQpNgKrkDzJpbnNS.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 28,
                        "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 53,
                        "name": " –¢—Ä–∏–ª–ª–µ—Ä"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 106544,
                        "name": "AGBO"
                    }
                },
                {
                    "company": {
                        "id": 104576,
                        "name": "Filmhaus Films"
                    }
                }
            ]
        },
        {
            "id": 792307,
            "title": "–ë–µ–¥–Ω—è–∂–∫–∏",
            "tagline": "–û–Ω–∞ –Ω–µ –ø–æ—Ö–æ–∂–∞ –Ω–∏ –Ω–∞ —á—Ç–æ, —á—Ç–æ –≤—ã –∫–æ–≥–¥–∞-–ª–∏–±–æ –≤–∏–¥–µ–ª–∏.",
            "overview": "–í–æ–∑–≤—Ä–∞—â–µ–Ω–Ω–∞—è –∫ –∂–∏–∑–Ω–∏ –Ω–µ–æ—Ä—Ç–æ–¥–æ–∫—Å–∞–ª—å–Ω—ã–º —É—á–µ–Ω—ã–º, –º–æ–ª–æ–¥–∞—è –∂–µ–Ω—â–∏–Ω–∞ —É–±–µ–≥–∞–µ—Ç —Å —Ä–∞–∑–≤—Ä–∞—Ç–Ω—ã–º –∞–¥–≤–æ–∫–∞—Ç–æ–º –≤ –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç—ã. –°–≤–æ–±–æ–¥–Ω–∞—è –æ—Ç –ø—Ä–µ–¥—Ä–∞—Å—Å—É–¥–∫–æ–≤ —Å–≤–æ–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –æ–Ω–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–≤–µ—Ä–¥–æ–π –≤ —Å–≤–æ–µ–º —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–∏ –æ—Ç—Å—Ç–∞–∏–≤–∞—Ç—å —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ.",
            "vote_average": 7.818999767303467,
            "release_date": "2023-12-07",
            "poster_path": "/kCGlIMHnOm8JPXq3rXM6c5wMxcT.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 878,
                        "name": " –ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"
                    }
                },
                {
                    "genre": {
                        "id": 10749,
                        "name": " –†–æ–º–∞–Ω—Ç–∏–∫–∞"
                    }
                },
                {
                    "genre": {
                        "id": 35,
                        "name": " –ö–æ–º–µ–¥–∏—è"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 127929,
                        "name": "Searchlight Pictures"
                    }
                },
                {
                    "company": {
                        "id": 6705,
                        "name": "Film4 Productions"
                    }
                },
                {
                    "company": {
                        "id": 22213,
                        "name": "TSG Entertainment"
                    }
                },
                {
                    "company": {
                        "id": 3353,
                        "name": "Element Pictures"
                    }
                }
            ]
        },
        {
            "id": 840430,
            "title": "–û—Å—Ç–∞—Ç–∫–∏",
            "tagline": "–î–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç –∏ —Ä–∞–¥–æ—Å—Ç—å.",
            "overview": "–í–æ—Ä—á–ª–∏–≤—ã–π –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω–æ–π —à–∫–æ–ª—ã –ù–æ–≤–æ–π –ê–Ω–≥–ª–∏–∏ –≤—ã–Ω—É–∂–¥–µ–Ω –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –∫–∞–º–ø—É—Å–µ –≤–æ –≤—Ä–µ–º—è —Ä–æ–∂–¥–µ—Å—Ç–≤–µ–Ω—Å–∫–∏—Ö –∫–∞–Ω–∏–∫—É–ª, —á—Ç–æ–±—ã –ø—Ä–∏—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∑–∞ –≥–æ—Ä—Å—Ç–∫–æ–π —É—á–µ–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω–µ–∫—É–¥–∞ –∏–¥—Ç–∏. –í –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤, —É –Ω–µ–≥–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–∞—è —Å–≤—è–∑—å —Å –æ–¥–Ω–∏–º –∏–∑ –Ω–∏—Ö ‚Äî —É—â–µ—Ä–±–Ω—ã–º –∏ —É–º–Ω—ã–º –Ω–∞—Ä—É—à–∏—Ç–µ–ª–µ–º —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è ‚Äî –∏ —Å –≥–ª–∞–≤–Ω—ã–º –ø–æ–≤–∞—Ä–æ–º —à–∫–æ–ª—ã, –∫–æ—Ç–æ—Ä—ã–π —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø–æ—Ç–µ—Ä—è–ª —Å—ã–Ω–∞ –≤–æ –í—å–µ—Ç–Ω–∞–º–µ.",
            "vote_average": 7.739999771118164,
            "release_date": "2023-10-27",
            "poster_path": "/VHSzNBTwxV8vh7wylo7O9CLdac.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 35,
                        "name": " –ö–æ–º–µ–¥–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 18,
                        "name": " –î—Ä–∞–º–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 14,
                        "name": "Miramax"
                    }
                },
                {
                    "company": {
                        "id": 2605,
                        "name": "Gran Via Productions"
                    }
                }
            ]
        },
        {
            "id": 872585,
            "title": "–û–ø–ø–µ–Ω–≥–µ–π–º–µ—Ä",
            "tagline": "–ú–∏—Ä –Ω–∞–≤—Å–µ–≥–¥–∞ –º–µ–Ω—è–µ—Ç—Å—è.",
            "overview": "–†–∞—Å—Å–∫–∞–∑ –æ —Ä–æ–ª–∏ –î–∂. –†–æ–±–µ—Ä—Ç–∞ –û–ø–ø–µ–Ω–≥–µ–π–º–µ—Ä–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∞—Ç–æ–º–Ω–æ–π –±–æ–º–±—ã –≤–æ –≤—Ä–µ–º—è –í—Ç–æ—Ä–æ–π –º–∏—Ä–æ–≤–æ–π –≤–æ–π–Ω—ã.",
            "vote_average": 8.112000465393066,
            "release_date": "2023-07-19",
            "poster_path": "/8Gxv8gSFCU0XGDykEGv7zR1n2ua.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 18,
                        "name": " –î—Ä–∞–º–∞"
                    }
                },
                {
                    "genre": {
                        "id": 36,
                        "name": " –ò—Å—Ç–æ—Ä–∏—è"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 9996,
                        "name": "Syncopy"
                    }
                },
                {
                    "company": {
                        "id": 33,
                        "name": "Universal Pictures"
                    }
                },
                {
                    "company": {
                        "id": 507,
                        "name": "Atlas Entertainment"
                    }
                }
            ]
        },
        {
            "id": 906126,
            "title": "–û–±—â–µ—Å—Ç–≤–æ —Å–Ω–µ–≥–∞",
            "tagline": "–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ–π —Ä–µ–∞–ª—å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏.",
            "overview": "13 –æ–∫—Ç—è–±—Ä—è 1972 –≥–æ–¥–∞ —Ä–µ–π—Å 571 –í–í–° –£—Ä—É–≥–≤–∞—è, –∑–∞—Ñ—Ä–∞—Ö—Ç–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ —Ä–µ–≥–±–∏ –≤ –ß–∏–ª–∏, –≤—Ä–µ–∑–∞–ª—Å—è –≤ –ª–µ–¥–Ω–∏–∫ –≤ —Å–∞–º–æ–º —Å–µ—Ä–¥—Ü–µ –ê–Ω–¥.",
            "vote_average": 8.065999984741211,
            "release_date": "2023-12-15",
            "poster_path": "/2e853FDVSIso600RqAMunPxiZjq.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 18,
                        "name": " –î—Ä–∞–º–∞"
                    }
                },
                {
                    "genre": {
                        "id": 36,
                        "name": " –ò—Å—Ç–æ—Ä–∏—è"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 207052,
                        "name": "El Arriero Films"
                    }
                },
                {
                    "company": {
                        "id": 217668,
                        "name": "Misi√≥n de Audaces Films"
                    }
                },
                {
                    "company": {
                        "id": 178464,
                        "name": "Netflix"
                    }
                }
            ]
        },
        {
            "id": 915935,
            "title": "–ê–Ω–∞—Ç–æ–º–∏—è –ø–∞–¥–µ–Ω–∏—è",
            "tagline": "–û–Ω–∞ —ç—Ç–æ —Å–¥–µ–ª–∞–ª–∞?",
            "overview": "–ñ–µ–Ω—â–∏–Ω—É –ø–æ–¥–æ–∑—Ä–µ–≤–∞—é—Ç –≤ —É–±–∏–π—Å—Ç–≤–µ –º—É–∂–∞, –∞ –∏—Ö —Å–ª–µ–ø–æ–π —Å—ã–Ω –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –º–æ—Ä–∞–ª—å–Ω–æ–π –¥–∏–ª–µ–º–º–æ–π, –±—É–¥—É—á–∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–≤–∏–¥–µ—Ç–µ–ª–µ–º.",
            "vote_average": 7.638999938964844,
            "release_date": "2023-08-23",
            "poster_path": "/kQs6keheMwCxJxrzV83VUwFtHkB.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 53,
                        "name": " –¢—Ä–∏–ª–ª–µ—Ä"
                    }
                },
                {
                    "genre": {
                        "id": 9648,
                        "name": " –¢–∞–π–Ω–∞"
                    }
                },
                {
                    "genre": {
                        "id": 80,
                        "name": " –ü—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–µ"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 58568,
                        "name": "Les Films de Pierre"
                    }
                },
                {
                    "company": {
                        "id": 12389,
                        "name": "Les Films Pell√©as"
                    }
                },
                {
                    "company": {
                        "id": 83,
                        "name": "France 2 Cin√©ma"
                    }
                },
                {
                    "company": {
                        "id": 109756,
                        "name": "Auvergne-Rh√¥ne-Alpes Cin√©ma"
                    }
                }
            ]
        },
        {
            "id": 930094,
            "title": "–ö—Ä–∞—Å–Ω—ã–π, –±–µ–ª—ã–π –∏ –∫–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π —Å–∏–Ω–∏–π",
            "tagline": "–õ—é–±–∏ —Ç–æ–≥–æ, –∫–æ–≥–æ —Ö–æ—á–µ—à—å. –≠—Ç–æ —Ö–æ—Ä–æ—à–∞—è –≤–Ω–µ—à–Ω—è—è –ø–æ–ª–∏—Ç–∏–∫–∞.",
            "overview": "–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Å—Å–æ—Ä–∞ –º–µ–∂–¥—É –ê–ª–µ–∫—Å–æ–º, —Å—ã–Ω–æ–º –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞, –∏ –±—Ä–∏—Ç–∞–Ω—Å–∫–∏–º –ø—Ä–∏–Ω—Ü–µ–º –ì–µ–Ω—Ä–∏ –Ω–∞ –∫–æ—Ä–æ–ª–µ–≤—Å–∫–æ–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏ —Å—Ç–∞–ª–∞ –ø–∏—â–µ–π –¥–ª—è —Ç–∞–±–ª–æ–∏–¥–æ–≤, –∏—Ö –¥–∞–≤–Ω—è—è –≤—Ä–∞–∂–¥–∞ —Ç–µ–ø–µ—Ä—å –≥—Ä–æ–∑–∏—Ç –≤–±–∏—Ç—å –∫–ª–∏–Ω –≤ –∞–º–µ—Ä–∏–∫–∞–Ω–æ-–±—Ä–∏—Ç–∞–Ω—Å–∫–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è. –ö–æ–≥–¥–∞ —Å–æ–ø–µ—Ä–Ω–∏–∫–∏ –≤—ã–Ω—É–∂–¥–µ–Ω—ã –∑–∞–∫–ª—é—á–∏—Ç—å –∏–Ω—Å—Ü–µ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–µ—Ä–µ–º–∏—Ä–∏–µ, –∏—Ö –ª–µ–¥—è–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç —Ç–∞—è—Ç—å, –∏ —Ç—Ä–µ–Ω–∏—è –º–µ–∂–¥—É –Ω–∏–º–∏ —Ä–∞–∑–∂–∏–≥–∞—é—Ç –Ω–µ—á—Ç–æ –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–µ, —á–µ–º –æ–Ω–∏ –∫–æ–≥–¥–∞-–ª–∏–±–æ –æ–∂–∏–¥–∞–ª–∏.",
            "vote_average": 8.038000106811523,
            "release_date": "2023-07-27",
            "poster_path": "/dD3vhyDRCCT90hf4rldHU6Wu3Va.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 35,
                        "name": " –ö–æ–º–µ–¥–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 10749,
                        "name": " –†–æ–º–∞–Ω—Ç–∏–∫–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 20580,
                        "name": "Amazon Studios"
                    }
                },
                {
                    "company": {
                        "id": 27711,
                        "name": "Berlanti Productions"
                    }
                }
            ]
        },
        {
            "id": 961323,
            "title": "–ù–∏–º–æ–Ω–∞",
            "tagline": "–ù–æ–≤—ã–π –≥–µ—Ä–æ–π –æ–±—Ä–µ—Ç–∞–µ—Ç —Ñ–æ—Ä–º—É.",
            "overview": "–†—ã—Ü–∞—Ä—å, –æ–±–≤–∏–Ω–µ–Ω–Ω—ã–π –≤ —Ç—Ä–∞–≥–∏—á–µ—Å–∫–æ–º –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏–∏, –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç—Å—è —Å –±–µ—Å–ø—É—Ç–Ω—ã–º –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–º-–æ–±–æ—Ä–æ—Ç–Ω–µ–º, —á—Ç–æ–±—ã –¥–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ—é –Ω–µ–≤–∏–Ω–æ–≤–Ω–æ—Å—Ç—å.",
            "vote_average": 7.900000095367432,
            "release_date": "2023-06-23",
            "poster_path": "/2NQljeavtfl22207D1kxLpa4LS3.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 12,
                        "name": " –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 16,
                        "name": " –ê–Ω–∏–º–∞—Ü–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 14,
                        "name": " –§–∞–Ω—Ç–∞–∑–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 10751,
                        "name": " –°–µ–º—å—è"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 13184,
                        "name": "Annapurna Pictures"
                    }
                },
                {
                    "company": {
                        "id": 31922,
                        "name": "DNEG Animation"
                    }
                }
            ]
        },
        {
            "id": 976573,
            "title": "–≠–ª–µ–º–µ–Ω—Ç–∞–ª—å",
            "tagline": "–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–∞–≥–∏—Ä—É—é—Ç.",
            "overview": "–í –≥–æ—Ä–æ–¥–µ, –≥–¥–µ –æ–±–∏—Ç–∞—Ç–µ–ª–∏ –æ–≥–Ω—è, –≤–æ–¥—ã, –∑–µ–º–ª–∏ –∏ –≤–æ–∑–¥—É—Ö–∞ –∂–∏–≤—É—Ç –≤–º–µ—Å—Ç–µ, –ø—ã–ª–∫–∞—è –º–æ–ª–æ–¥–∞—è –∂–µ–Ω—â–∏–Ω–∞ –∏ –ø–ª—ã–≤—É—â–∏–π –ø–æ —Ç–µ—á–µ–Ω–∏—é –ø–∞—Ä–µ–Ω—å –æ—Ç–∫—Ä–æ—é—Ç –¥–ª—è —Å–µ–±—è –Ω–µ—á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ–µ: –∫–∞–∫ –º–Ω–æ–≥–æ —É –Ω–∏—Ö –æ–±—â–µ–≥–æ.",
            "vote_average": 7.664000034332275,
            "release_date": "2023-06-14",
            "poster_path": "/4Y1WNkd88JXmGfhtWR7dmDAo1T2.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 16,
                        "name": " –ê–Ω–∏–º–∞—Ü–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 35,
                        "name": " –ö–æ–º–µ–¥–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 10751,
                        "name": " –°–µ–º—å—è"
                    }
                },
                {
                    "genre": {
                        "id": 14,
                        "name": " –§–∞–Ω—Ç–∞–∑–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 10749,
                        "name": " –†–æ–º–∞–Ω—Ç–∏–∫–∞"
                    }
                },
                {
                    "genre": {
                        "id": 12,
                        "name": " –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 2,
                        "name": "Walt Disney Pictures"
                    }
                },
                {
                    "company": {
                        "id": 3,
                        "name": "Pixar"
                    }
                }
            ]
        },
        {
            "id": 980489,
            "title": "Gran Turismo",
            "tagline": "–û—Ç –≥–µ–π–º–µ—Ä–∞ –¥–æ –≥–æ–Ω—â–∏–∫–∞.",
            "overview": "–ù–∞—Å—Ç–æ—è—â–∞—è –∏—Å—Ç–æ—Ä–∏—è –æ–± –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ –∂–µ–ª–∞–Ω–∏–π –ø–æ–¥—Ä–æ—Å—Ç–∫–∞, –∏–≥—Ä–∞—é—â–µ–≥–æ –≤ Gran Turismo, —á—å–∏ –∏–≥—Ä–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ –ø–æ–∑–≤–æ–ª–∏–ª–∏ –µ–º—É –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ –≤ —Å–µ—Ä–∏–∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π Nissan –∏ —Å—Ç–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º –∞–≤—Ç–æ–≥–æ–Ω—â–∏–∫–æ–º.",
            "vote_average": 7.86299991607666,
            "release_date": "2023-08-09",
            "poster_path": "/51tqzRtKMMZEYUpSYkrUE7v9ehm.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 12,
                        "name": " –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 28,
                        "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 18,
                        "name": " –î—Ä–∞–º–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 125281,
                        "name": "PlayStation Productions"
                    }
                },
                {
                    "company": {
                        "id": 84792,
                        "name": "2.0 Entertainment"
                    }
                },
                {
                    "company": {
                        "id": 5,
                        "name": "Columbia Pictures"
                    }
                }
            ]
        },
        {
            "id": 1010581,
            "title": "–ú–æ—è –≤–∏–Ω–∞",
            "tagline": None,
            "overview": "–ù–æ–π –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∏–Ω—É—Ç—å —Å–≤–æ–π –≥–æ—Ä–æ–¥, –ø–∞—Ä–Ω—è –∏ –¥—Ä—É–∑–µ–π, —á—Ç–æ–±—ã –ø–µ—Ä–µ–µ—Ö–∞—Ç—å –≤ –æ—Å–æ–±–Ω—è–∫ –£–∏–ª—å—è–º–∞ –õ–µ–π—Å—Ç–µ—Ä–∞, —è—Ä–∫–æ–≥–æ –∏ –±–æ–≥–∞—Ç–æ–≥–æ –º—É–∂–∞ –µ–µ –º–∞—Ç–µ—Ä–∏ –†–∞—Ñ–∞—ç–ª—ã. –ì–æ—Ä–¥—ã–π –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π 17-–ª–µ—Ç–Ω–∏–π –ù–æ–π –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∂–∏—Ç—å –≤ –æ—Å–æ–±–Ω—è–∫–µ, –æ–∫—Ä—É–∂–µ–Ω–Ω–æ–º —Ä–æ—Å–∫–æ—à—å—é. –û–¥–Ω–∞–∫–æ –∏–º–µ–Ω–Ω–æ —Ç–∞–º –æ–Ω–∞ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç –ù–∏–∫–∞, —Å–≤–æ–µ–≥–æ –Ω–æ–≤–æ–≥–æ —Å–≤–æ–¥–Ω–æ–≥–æ –±—Ä–∞—Ç–∞, –∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –∏—Ö —Å–∏–ª—å–Ω—ã—Ö –ª–∏—á–Ω–æ—Å—Ç–µ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—á–µ–≤–∏–¥–Ω—ã–º —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞.",
            "vote_average": 7.993000030517578,
            "release_date": "2023-06-08",
            "poster_path": "/w46Vw536HwNnEzOa7J24YH9DPRS.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 18,
                        "name": " –î—Ä–∞–º–∞"
                    }
                },
                {
                    "genre": {
                        "id": 10749,
                        "name": " –†–æ–º–∞–Ω—Ç–∏–∫–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 32485,
                        "name": "Pokeepsie Films"
                    }
                },
                {
                    "company": {
                        "id": 20580,
                        "name": "Amazon Studios"
                    }
                }
            ]
        },
        {
            "id": 1026227,
            "title": "–ó–∞–≤—Ç—Ä–∞ –µ—â–µ –µ—Å—Ç—å",
            "tagline": None,
            "overview": "–í –ø–æ—Å–ª–µ–≤–æ–µ–Ω–Ω–æ–π –ò—Ç–∞–ª–∏–∏ —Å–µ–º—å—è —Ç–∏–ø–∏—á–Ω–æ–π –¥–æ–º–æ—Ö–æ–∑—è–π–∫–∏ –î–µ–ª–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–º—è—Ç–µ–Ω–∏–∏ –∏–∑-–∑–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â–µ–π –ø–æ–º–æ–ª–≤–∫–∏ –ª—é–±–∏–º–æ–≥–æ –ø–µ—Ä–≤–µ–Ω—Ü–∞ –ú–∞—Ä—Å–µ–ª–ª—ã. –û–¥–Ω–∞–∫–æ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∑–∞–≥–∞–¥–æ—á–Ω–æ–≥–æ –ø–∏—Å—å–º–∞ –ø—Ä–∏–¥–∞—Å—Ç –î–µ–ª–∏–∏ –º—É–∂–µ—Å—Ç–≤–∞ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è –ª–∏—Ü–æ–º –∫ –ª–∏—Ü—É —Å–æ —Å–≤–æ–∏–º –∂–µ—Å—Ç–æ–∫–∏–º –º—É–∂–µ–º –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±–µ –ª—É—á—à–µ–µ –±—É–¥—É—â–µ–µ.",
            "vote_average": 8.199999809265137,
            "release_date": "2023-10-26",
            "poster_path": "/4Hi7yjiQjokEDStT1MOj5rPgRfW.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 35,
                        "name": " –ö–æ–º–µ–¥–∏—è"
                    }
                },
                {
                    "genre": {
                        "id": 18,
                        "name": " –î—Ä–∞–º–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 21246,
                        "name": "Wildside"
                    }
                },
                {
                    "company": {
                        "id": 115535,
                        "name": "Vision Distribution"
                    }
                },
                {
                    "company": {
                        "id": 213972,
                        "name": "Sky Studios"
                    }
                }
            ]
        }
    ]
    with mock.patch('handlers.content.get_content_based', return_value=movies) as mock_get_content_based:
        message = AsyncMock()
        message.from_user.id = 1080557340
        await start_content(message)

        assert mock_get_content_based.call_count == 1
        assert mock_get_content_based.call_args == mock.call(message.from_user.id, {"page": 1, "n": 100})

        media = await show_group_movies(movies)

        message.reply.assert_awaited_with(text="–ü–æ—Ö–æ–∂–µ –Ω–∞ —Ç–æ, —á—Ç–æ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ! üòä")
        message.reply_media_group.assert_awaited_with(media=media[10:])


@pytest.mark.asyncio
async def test_content_media_and_poster_is_none():
    movies = [
        {
            "id": 507089,
            "title": "–ü—è—Ç—å –ù–æ—á–µ–π –° –§—Ä–µ–¥–¥–∏",
            "tagline": "–°–º–æ–∂–µ—Ç–µ –ª–∏ –≤—ã –ø–µ—Ä–µ–∂–∏—Ç—å –ø—è—Ç—å –Ω–æ—á–µ–π?",
            "overview": "–ù–µ–¥–∞–≤–Ω–æ —É–≤–æ–ª–µ–Ω–Ω—ã–π –∏ –æ—Ç—á–∞—è–Ω–Ω–æ –Ω—É–∂–¥–∞—é—â–∏–π—Å—è –≤ —Ä–∞–±–æ—Ç–µ, –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –º–æ–ª–æ–¥–æ–π —á–µ–ª–æ–≤–µ–∫ –ø–æ –∏–º–µ–Ω–∏ –ú–∞–π–∫ —Å–æ–≥–ª–∞—à–∞–µ—Ç—Å—è —É—Å—Ç—Ä–æ–∏—Ç—å—Å—è –Ω–∞ –¥–æ–ª–∂–Ω–æ—Å—Ç—å –Ω–æ—á–Ω–æ–≥–æ –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∞ –≤ –∑–∞–±—Ä–æ—à–µ–Ω–Ω–æ–º —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ: –ø–∏—Ü—Ü–µ—Ä–∏—è –§—Ä–µ–¥–¥–∏ –§–∞–∑–±–∏—Ä–∞. –ù–æ –≤—Å–∫–æ—Ä–µ –æ–Ω –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç, —á—Ç–æ –≤–æ –§—Ä–µ–¥–¥–∏ –≤—Å–µ –Ω–µ —Ç–æ, —á–µ–º –∫–∞–∂–µ—Ç—Å—è.",
            "vote_average": 7.6570000648498535,
            "release_date": "2023-10-25",
            "poster_path": "/A4j8S6moJS2zNtRR8oWF08gRnL5.jpg",
            "genres": [
                {
                    "genre": {
                        "id": 27,
                        "name": " –£–∂–∞—Å—Ç–∏–∫"
                    }
                },
                {
                    "genre": {
                        "id": 9648,
                        "name": " –¢–∞–π–Ω–∞"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 3172,
                        "name": "Blumhouse Productions"
                    }
                },
                {
                    "company": {
                        "id": 211144,
                        "name": "Scott Cawthon Productions"
                    }
                }
            ]
        },
        {
            "id": 447365,
            "title": "–°—Ç—Ä–∞–∂–∏ –ì–∞–ª–∞–∫—Ç–∏–∫–∏ –¢–æ–º. 3",
            "tagline": "–ï—â–µ —Ä–∞–∑ —Å —á—É–≤—Å—Ç–≤–æ–º.",
            "overview": "–ü–∏—Ç–µ—Ä –ö–≤–∏–ª–ª, –≤—Å–µ –µ—â–µ –Ω–µ –æ–ø—Ä–∞–≤–∏–≤—à–∏–π—Å—è –æ—Ç –ø–æ—Ç–µ—Ä–∏ –ì–∞–º–æ—Ä—ã, –¥–æ–ª–∂–µ–Ω —Å–ø–ª–æ—Ç–∏—Ç—å –≤–æ–∫—Ä—É–≥ —Å–µ–±—è —Å–≤–æ—é –∫–æ–º–∞–Ω–¥—É, "
                        "—á—Ç–æ–±—ã –∑–∞—â–∏—Ç–∏—Ç—å –≤—Å–µ–ª–µ–Ω–Ω—É—é, –∞ —Ç–∞–∫–∂–µ –∑–∞—â–∏—Ç–∏—Ç—å –æ–¥–Ω–æ–≥–æ –∏–∑ —Å–≤–æ–∏—Ö. –ú–∏—Å—Å–∏—è, –∫–æ—Ç–æ—Ä–∞—è, –µ—Å–ª–∏ –µ–µ –Ω–µ "
                        "–∑–∞–≤–µ—Ä—à–∏—Ç—å —É—Å–ø–µ—à–Ω–æ, –≤–ø–æ–ª–Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–Ω—Ü—É –°—Ç—Ä–∞–∂–µ–π, –∫–∞–∫–∏–º–∏ –º—ã –∏—Ö –∑–Ω–∞–µ–º.",
            "vote_average": 7.974999904632568,
            "release_date": "2023-05-03",
            "poster_path": None,
            "genres": [
                {
                    "genre": {
                        "id": 878,
                        "name": " –ù–∞—É—á–Ω–∞—è —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"
                    }
                },
                {
                    "genre": {
                        "id": 12,
                        "name": " –ü—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ"
                    }
                },
                {
                    "genre": {
                        "id": 28,
                        "name": " –î–µ–π—Å—Ç–≤–∏–µ"
                    }
                }
            ],
            "companies": [
                {
                    "company": {
                        "id": 420,
                        "name": "Marvel Studios"
                    }
                },
                {
                    "company": {
                        "id": 176762,
                        "name": "Kevin Feige Productions"
                    }
                }
            ]
        }
    ]

    with mock.patch('handlers.content.get_content_based', return_value=movies) as mock_get_content_based:
        message = AsyncMock()
        message.from_user.id = 2
        await start_content(message)
        assert mock_get_content_based.call_count == 1
        assert mock_get_content_based.call_args == mock.call(message.from_user.id, {"page": 1, "n": 100})

        media = await show_group_movies(movies)
        message.reply_media_group.assert_awaited_with(media=media)

        movies_poster_path_none = list(filter(lambda movie: movie['poster_path'] is None, movies))
        text_message = await show_text_movies(movies_poster_path_none)
        message.reply.assert_awaited_with(text_message, parse_mode="HTML")